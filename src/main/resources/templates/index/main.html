<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">
<head th:replace="partials/partials.html :: head ('Main')">
<body>
<nav th:replace="partials/partials.html :: navbar"></nav>
<!--header-->

<!--<div th:each="post : ${posts}">-->
<!--    <p th:text="${post.body}"></p>-->
<!--</div>-->

<!--display logged-in username-->
<div th:if="${user}">
    <p th:text="${user.username}"></p>
</div>

<!--display Posts from users that the logged-in user is Following-->
<div th:if="${followingPosts}">
    <hr>
    <!--        <form id="like-post" action="/user/like" method="post"></form>-->
    <div th:each="post : ${followingPosts}">
        <p th:text="'Post #' + ${post.id}"></p>
<!--        <p th:text="${post.user.username}"></p>-->
        <a th:text="${post.user.username}" th:href="'user/' + ${post.user.id}"></a>
        <p th:text="${post.creationDate}"></p>
        <p th:text="${post.body}"></p>
        <p th:text="'Likes: ' + ${post.usersThatLiked.size()}"></p>
        <p>Comments:</p>
        <div th:each="comment : ${post.comments}">
            <p th:text="${comment.user.username} + ' said: ' + ${comment.comment}"></p>
        </div>

        <div th:each="image : ${post.postImages}">
            <p th:text="${image.url}"></p>
        </div>

<!--        JavaScript listener used to Like a Post -->
        <button th:data="${post.id} + ',' + ${sessionUserId}" class="like-btn btn btn-secondary">Like Post</button>

        <hr>
    </div>
</div>

<!--footer and JS partials needed on every page-->
<footer th:replace="partials/partials.html :: footer"></footer>
<div th:replace="partials/partials.html :: scripts"></div>
</body>
</html>