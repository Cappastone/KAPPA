<!DOCTYPE html>
<html lang="en">
<html  xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">
<head th:replace="partials/partials.html :: head ('View Profile')">
<body>
<nav th:replace="partials/partials.html :: navbar"></nav>

<!--    display users that a logged-in user is Following-->
<div th:if="${following}">
    <p th:text="'Following: ' + ${following.size()}"></p>
    <div th:each="following : ${following}">
        <!--            <p th:text="${following.username}"></p>-->
        <a th:text="${following.username}" th:href="'/user/' + ${following.id}"></a>
        <img style="object-fit: cover; height: 150px; width:200px;" th:src="${following.profilePictureUrl}">

        <div sec:authorize="isAuthenticated()">
            <div th:if="${ListUserIdsByFollowerId.contains(following.id)}">
                <button th:data="${following.id} + ',' + ${sessionUserId}" class="follow-btn btn btn-primary">Unfollow</button>
            </div>

            <div th:if="${!ListUserIdsByFollowerId.contains(following.id)}">
                <button th:data="${following.id} + ',' + ${sessionUserId}" class="follow-btn btn btn-secondary">Follow</button>
            </div>
        </div>
        <div sec:authorize="!isAuthenticated()">
            <button onclick="redirectToLogin()" class="btn btn-danger">Follow</button>
        </div>

    </div>
</div>

<!--    display logged-in user's Follower info-->
<div th:if="${user.followers}">
    <p th:text="'Followers: ' + ${user.followers.size()}"></p>
    <div th:each="follower : ${user.followers}">
        <!--            <p th:text="${follower.username}"></p>-->
        <a th:text="${follower.username}" th:href="'/user/' + ${follower.id}"></a>
        <p th:text="'User Id: ' + ${follower.id}"></p>
        <img style="object-fit: cover; height: 150px; width:200px;" th:src="${follower.profilePictureUrl}">

<!--        <div sec:authorize="isAuthenticated()">-->
<!--            <div th:if="${ListUserIdsByFollowerId.contains(user.id)}">-->
<!--                <button th:data="${user.id} + ',' + ${sessionUserId}" class="follow-btn btn btn-primary">Follow</button>-->
<!--            </div>-->

<!--            <div th:if="${!ListUserIdsByFollowerId.contains(user.id)}">-->
<!--                <button th:data="${user.id} + ',' + ${sessionUserId}" class="follow-btn btn btn-secondary">Follow</button>-->
<!--            </div>-->
<!--        </div>-->
<!--        <div sec:authorize="!isAuthenticated()">-->
<!--            <button onclick="redirectToLogin()" class="btn btn-danger">Follow</button>-->
<!--        </div>-->

    </div>
</div>


<!--partials needed on every page-->
<footer th:replace="partials/partials.html :: footer"></footer>
<div th:replace="partials/partials.html :: scripts"></div>
</body>
</html>