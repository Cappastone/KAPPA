<!DOCTYPE html>
<html lang="en">
<html  xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="en">
<head th:replace="partials/partials.html :: head ('View Profile')">
<body>
<nav th:replace="partials/partials.html :: navbar"></nav>

<div th:if="${user}">
    <p th:text="${user.username}"></p>

    <div th:if="${user.profilePictureUrl}">
        <img th:src="${user.profilePictureUrl}" alt="profile-picture">
        <p th:text="${user.bio}"></p>
    </div>

    <div th:if="!${user.profilePictureUrl}">
        <img src="https://static1.colliderimages.com/wordpress/wp-content/uploads/2022/04/Best-Creations-From-Dexters-Laboratory.jpg" alt="profile-picture">
        <p th:text="${user.bio}"></p>
    </div>

    <hr>

    <div th:if="${user.followers}">
        <p th:text="'Followers: ' + ${user.followers.size()}"></p>
        <div th:each="follower : ${user.followers}">
            <p th:text="${follower.username}"></p>
        </div>
    </div>

    <hr>

    <div th:if="${user.favoriteGames}">
        <p th:text="'Favorite Games: ' + ${user.favoriteGames.size()}"></p>
        <div th:each="game : ${user.favoriteGames}">
            <p th:text="${game.title}"></p>
        </div>
    </div>

    <hr>

    <div th:if="${user.links}">
        <p>Platform Links:</p>
        <p th:text="'Discord: ' + ${user.links.discord}"></p>
        <p th:text="'Nintendo: ' + ${user.links.nintendo}"></p>
        <p th:text="'Playstation: ' + ${user.links.playstation}"></p>
        <p th:text="'Twitch: ' + ${user.links.twitch}"></p>
        <p th:text="'Xbox: ' + ${user.links.xbox}"></p>
        <p th:text="'YouTube: ' + ${user.links.youtube}"></p>
    </div>

    <hr>

    <div th:if="${post}">
        <div th:each="post : ${post}">
            <p th:text="'Post #' + ${post.id}"></p>
            <p th:text="${post.date}"></p>
            <p th:text="${post.body}"></p>
            <p th:text="'Likes: ' + ${post.usersThatLiked.size()}"></p>
            <p>Comments:</p>
            <div th:each="comment : ${post.comments}">
                <p th:text="${comment.user.username} + ' said: ' + ${comment.comment}"></p>
            </div>

            <div th:each="image : ${post.postImages}">
    <!--            <p th:text="${image.title}"></p>-->
                <p th:text="${image.url}"></p>
            </div>

            <hr>

        </div>
    </div>

</div>

<footer th:replace="partials/partials.html :: footer"></footer>
</body>
</html>